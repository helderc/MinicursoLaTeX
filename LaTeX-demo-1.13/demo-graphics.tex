%%% -*-LaTeX-*-
%%% demo-graphics.tex -- exemplo de inclusao de gráficos eps e gerados
%%% pelo gnuplot.  Este arquivo é usada apenas na versão DVI/PS.
%%% $Id: demo-graphics.tex,v 1.11 2001/01/04 02:21:50 jessen Exp $

\section{Figuras}

\index{graficos@gráficos|see{figuras}}%
\index{figuras|(}%
\index{figuras!Encapsulated PostScript@\eng{Encapsulated PostScript}}%
\index{Encapsulated PostScript@\eng{Encapsulated PostScript}}%
\index{EPS|see{\eng{Encapsulated PostScript}}}%

Esta seção mostra exemplos de inclusão de figuras \eng{Encapsulated
  PostScript} (EPS) bem como várias operações sobre essas figuras:
alteração de largura e altura, rotação, espelhamento, mudança de
escala, etc.

\Glossary{EPS}{Encapsulated PostScript.  Formato muito usado para
  inclusão de figuras em documentos \LaTeX.  Um arquivo EPS é
  essencialmente um arquivo PostScript com algumas restrições---não
  pode conter código que altere o estado global do interpretador
  PostScript e deve conter uma linha com um \eng{bounding box} que
  descreve as dimensões da figura.}%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\subsection{Figuras com \eng{caption} abaixo da Imagem}
\index{figuras!caption abaixo@\eng{caption} abaixo}%
\index{caption@\eng{caption}!abaixo!figura}%

Na figura~\ref{fig:gnu} temos um exemplo com \eng{caption} bastante
longo abaixo da imagem.  A distância entre a figura e seu
\eng{caption} foi diminuída para \unidade{5}{pt} alterando-se a medida
\lengthname{abovecaptionskip} com o comando \command{setlength}.

%%% h == here ou t == top ou b == botton
\begin{figure}[htb]
  \index{figuras!de um gnu}%
  \setlength{\abovecaptionskip}{5pt}
  %%% o valor default de \abovecaptionskip definido para a classe
  %%% article é de 10pt.
  \centering
  %%% VIDE ABAIXO COMENTÁRIO SOBRE USO DE DIRETÓRIOS NO PATHNAME
  %%% DOS ARQUIVOS INCLUÍDOS.
  \includegraphics{figures/gnu.eps}
  \caption[Exemplo de um gnu com \eng{caption} longo]{Exemplo de um
    gnu---Notar que um \eng{caption} não é restrito a uma única linha.
    Entretanto isso pode ser um problema por deixar a entrada na Lista
    de Figuras muito longa.  Este problema pode ser contornado
    passando-se um parâmetro extra ao \eng{caption}, informando-o da
    entrada a ser usada na Lista de Figuras.}
  \label{fig:gnu}
\end{figure}

%%% O uso de subdiretórios no pathname dos arquivos que se deseja incluir
%%% pode deixar o documento menos portável.  O separador `/' não fará
%%% muito sentido em outros ambientes, como VMS, MacOS, etc.
%%%
%%% Uma alternativa é o uso da variável de ambiente TEXINPUTS:
%%%
%%% export TEXINPUTS=:~/foodir//
%%%
%%% fará com que o LaTeX procure os documentos definidos nos seus comandos
%%% \input, \include e \includegraphics no diretório ~/foodir e seus
%%% subdiretórios.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\subsection{Figuras com \eng{caption} acima da Imagem}
\index{figuras!caption acima@\eng{caption} acima}%
\index{caption@\eng{caption}!acima!figura}%
\index{figuras!center environment@\eng{center environment}}%
\index{figuras!centering@\comm{centering}}%
\index{figuras!centering e center@\comm{centering} e%
\eng{center}!diferencas@diferenças}%

Na figura~\ref{fig:platypus} temos um exemplo com \eng{caption} acima
da imagem.  A largura da imagem foi definida em \unidade{8}{cm}.  A
distância entre o \eng{caption} e a figura foi ajustada para
\unidade{10}{pt} alterando-se a medida \lengthname{belowcaptionskip}
com o comando \command{setlength}.

\begin{figure}[htb]
  \index{figuras!de um platypus}%
  \setlength{\belowcaptionskip}{10pt}
  %%% o valor default de \belowcaptionskip definido para a classe
  %%% article é de 0pt.
  \begin{center}
    \caption{Um platypus com \eng{caption} acima da imagem}
    \includegraphics[width=8cm]{figures/platypus.eps}
    \label{fig:platypus}
  \end{center}
\end{figure}

A Fig.~\ref{fig:platypus} usa o \eng{environment} \environ{center}
para centralizar sua imagem.  Todas as demais figuras dessa seção usam
o comando \command{centering} para essa finalidade.  Notar como o uso
do \eng{environment} \environ{center} aumenta o espaço em branco ao
redor da figura.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\subsection{Alterando as Dimensões das Figuras}
\index{figuras!alterando dimensoes@alterando dimensões}%
\index{figuras!width@\eng{width}}%
\index{figuras!largura|see{\eng{width}}}%
\index{figuras!height@\eng{height}}%
\index{figuras!altura|see{\eng{height}}}%

Na figura~\ref{fig:tux} temos um exemplo com alteração da largura e da
altura da imagem.  Neste exemplo as dimensões foram definidas em
\unidade{10}{em}\footnote{\unidade{1}{em} é aproximadamente igual à
largura de um ``M'', levando em conta a fonte e o estilo corrente.}
e \unidade{20}{ex}\footnote{\unidade{1}{ex} é aproximadamente igual à
altura de um ``x'', levando em conta a fonte e o estilo corrente.}.

\begin{figure}[htb]
  \centering
  \includegraphics[width=10em,height=20ex]{figures/tux.eps}
  \caption[Tux---Exemplo de um pingüim]{Tux\footnotemark---Exemplo
    de um pingüim}
  \label{fig:tux}
\end{figure}

\index{footnote@\eng{footnote}!dentro de caption@dentro de \eng{caption}}%
A Fig.~\ref{fig:tux} usa um \eng{footnote} no \eng{caption} com os
comandos \command{footnotemark} e \command{footnotetext}.

\footnotetext{Este \eng{logo} foi criado por Larry Ewing.  Outras
  versões estão disponíveis em
  \url{http://www.isc.tamu.edu/~lewing/linux/}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\subsection{Rotação e Espelhamento de Figuras}
\index{figuras!rotacao@rotação}%
\index{figuras!espelhamento}%

Na figura~\ref{fig:gnu-rotated} temos um exemplo com rotação da
imagem.

\begin{figure}[htb]
  \index{figuras!rotacao de 90@rotação de $90^\circ$}%
  \centering
  \includegraphics[angle=90]{figures/gnu.eps}
  \caption{Gnu com rotação de $90^\circ$}
  \label{fig:gnu-rotated}
\end{figure}

Na figura~\ref{fig:gnu-reflected} temos um exemplo com espelhamento da
imagem.

\begin{figure}[htb]
  \index{figuras!espelhamento}%
  \centering
    \reflectbox{\includegraphics{figures/gnu.eps}}
    \caption{Gnu com espelhamento}
    \label{fig:gnu-reflected}
\end{figure}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\subsection{\eng{Scale Factor} de Figuras}
\index{figuras!scale@\eng{scale}}%
\index{figuras!dentro de frame@dentro de \eng{frame}}%

Na figura~\ref{fig:gnu-scale} temos um exemplo de aumento do tamanho
original usando o parâmetro $scale=1.5$.  A figura foi colocada dentro
de um \eng{frame} com o comando \command{fbox}.

%%% IMPORTANTE: notar o posicionador H, definido no package float.
%%% Este posicionador é mais enfático do que h ou !h, *realmente*
%%% indicando ``here'', mesmo que isso deixe areas em branco no
%%% texto.
\begin{figure}[H]
  \index{figuras!scale=1.5@$scale=1.5$}%
  \index{figuras!package float@\eng{package} \pack{float}}%
  \centering
  \fbox{\includegraphics[scale=1.5]{figures/gnu.eps}}
  \caption{Gnu dentro de \eng{frame} com $scale=1.5$}
  \label{fig:gnu-scale}
\end{figure}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\subsection{Figuras Lado a Lado}
\label{sec:fig-syde-by-side}%
\index{figuras!figuras lado a lado}%

É possível colocar figuras lado a lado, como por exemplo a
figura~\ref{fig:esq} e a figura~\ref{fig:dir}.  Para um exemplo
similar usando tabelas ver seção~\ref{sec:tab-syde-by-side} na
página~\pageref{sec:tab-syde-by-side}.

\begin{figure}[htb]
  \begin{minipage}[b]{.46\linewidth}
    \index{figuras!scale=0.45@$scale=0.45$}%
    \centering \includegraphics[scale=0.45]{figures/platypus.eps}
    \caption{Platypus com $scale = 0.45$}
    \label{fig:esq}
  \end{minipage}\hfill
  \begin{minipage}[b]{.46\linewidth}
    \index{figuras!rotacao de 270@rotação de $270^\circ$}%
    \index{figuras!scale=0.7@$scale=0.7$}%
    \centering
    \includegraphics[scale=0.7,angle=270]{figures/tux.eps}
    \caption{Tux com rotação de $270^\circ$}
    \label{fig:dir}
  \end{minipage}
\end{figure}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\subsection{Figuras Dentro de Figuras}
\label{subsec:subfigure}
\index{figuras!figuras dentro de figuras}%
\index{figuras!package subfigure@\eng{package} \pack{subfigure}}%

O \eng{package} \package{subfigure} foi usado na criação da
Fig.~\ref{fig:3gnus}.  Esta figura contém de fato 3 figuras:
figura~\ref{fig:gnu-1}, figura~\ref{fig:gnu-2} e
figura~\ref{fig:gnu-3}.

\begin{figure}[htbp]
  \centering
  \mbox{%
   %%% Notar o \qquad, aumentando o espaçamento entre as figuras.
   %%% Pode-se usar apenas \quad, dando um espaçamento menor
   %%% ou simplesmente aceitar o espaçamento default.
    \subfigure[$scale=1.8$]{\label{fig:gnu-1}%
      \includegraphics[scale=1.8]{figures/gnu.eps}}\qquad
    \subfigure[$scale=1.6$]{\label{fig:gnu-2}%
      \includegraphics[scale=1.6]{figures/gnu.eps}}\qquad
    \subfigure[$scale=1.4$]{\label{fig:gnu-3}%
      \includegraphics[scale=1.4]{figures/gnu.eps}}
    }
  \caption{Comparação de tamanho entre três gnus}
  \label{fig:3gnus}
\end{figure}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\subsection{Figuras ao Lado de Texto}
\label{subsec:wrapfig}
\index{figuras!figuras ao lado de texto}%
\index{figuras!package wrapfig@\eng{package} \pack{wrapfig}}%

Com os \eng{environments} \environ{wrapfigure} e \environ{wraptable},
definidos no \eng{package} \package{wrapfig}, é possível colocar texto
ao lado de figuras e tabelas.  Um exemplo deste tipo de
\eng{environment} é mostrado na Fig.~\ref{fig:wrapgnu}.

\begin{wrapfigure}[6]{r}{8em}
  \centering
  \includegraphics{figures/gnu.eps}
  \caption[Gnu ao lado de texto]{Gnu}
  \label{fig:wrapgnu}
\end{wrapfigure}

O \eng{environment} \environ{wrapfigure} recebe dois parâmetros
opcionais e dois obrigatórios como segue:

\begin{codeverbatim}
\begin{wrapfigure}[nlines]{placement}[overhang]{width}
\end{wrapfigure}
\end{codeverbatim}

\begin{description}
\item [\textit{nlines}] (opcional) Número de linhas que vão ao lado da
  figura.  Este valor é normalmente calculado pela altura da figura,
  mas pode ser opcionalmente colocado.

\item [\textit{placement}] O posicionamento da figura pode ser `r',
  `l', `i', `o' para o posicionamento à direita, esquerda, ``dentro''
  e ``fora'' da página, respectivamente.

\item [\textit{overhang}] (opcional) Define a distância da figura em
  relação à margem.

\item [\textit{width}] Largura da figura.
\end{description}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\subsection{Aumentando as Bordas de Figuras}
\index{figuras!aumentando as bordas}%

A Fig.~\ref{fig:gnu-aumento-borda} teve todas as suas bordas
aumentadas em \unidade{1}{cm}.

\begin{figure}[htb]
  \centering
  \includegraphics[trim=-1cm -1cm -1cm -1cm]{figures/gnu.eps}
  %%% [trim=left, bottom, right, top]
  \caption{Gnu com aumento de borda de 1cm}
  \label{fig:gnu-aumento-borda}
\end{figure}

\clearpage

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\subsection{Incluindo Figuras Geradas com \gnuplot{}}
\index{figuras!gnuplot@\gnuplot}%
\index{gnuplot@\gnuplot}%

\Glossary{GNUPLOT}{Programa interativo para construção de gráficos de
  função.  Também pode gerar gráficos a partir de pontos
  de um arquivo.}%

\subsubsection{Exemplo do Gráfico de uma Função}
\index{gnuplot@\gnuplot!grafico de funcao@gráfico de função}%

\begin{figure}[htbp]
  \index{figuras!criadas no gnuplot@criadas no \gnuplot}%
  \centering
  % \gnuplotinput é definido em demo.sty
  \gnuplotinput{gnuplot/gnuplot-1.tex}
  \caption{Gráfico de $\cos e^{x^2}$ criado com \gnuplot{}}
  \label{fig:gnuplot-example-1}
\end{figure}

A Fig.~\ref{fig:gnuplot-example-1} foi criada no \gnuplot{} com:
\index{gnuplot@\gnuplot!comandos}%

\begin{codeverbatim}
set terminal pslatex monochrome norotate
set output 'gnuplot-1.tex'
set title 'Usando figuras do \gnuplot{} no \LaTeX{}'
g(x) = cos(exp(x**2))
set xtics ('$-\frac{\pi}{2}$' -pi/2,\
           '$-\frac{\pi}{4}$' -pi/4,\
           '$0$' 0,\
           '$\frac{\pi}{4}$' pi/4,\
           '$\frac{\pi}{2}$' pi/2)
set ytics ('$-1$' -1,\
           '$-\frac{1}{2}$' -0.5,\
           '$0$' 0,\
           '$\frac{1}{2}$' 0.5,\
           '$1$' 1)
set samples 500
plot [-pi/2:pi/2] g(x) title '$\cos e^{x^2}$'
\end{codeverbatim}

A figura gerada foi incorporada ao documento com:

\index{figuras!incluindo figuras do gnuplot@incluindo figuras do \gnuplot}%
\begin{codeverbatim}
\begin{figure}[htbp]
  \centering
  \input{gnuplot-1.tex}
  %% Na verdade \gnuplotinput foi usado no lugar de \input. Vide demo.sty.
\end{figure}
\end{codeverbatim}

\subsubsection{Exemplo de Gráfico de um Arquivo de Dados}
\index{gnuplot@\gnuplot!grafico de um arquivo de dados@gráfico de
um arquivo de dados}%

\begin{figure}[htbp]
  \index{figuras!criadas no gnuplot@criadas no \gnuplot}%
  \centering
  % \gnuplotinput é definido em demo.sty
  \gnuplotinput{gnuplot/gnuplot-2.tex}
  \caption{Gráfico de um arquivo de dados criado com \gnuplot{}}
  \label{fig:gnuplot-example-2}
\end{figure}

A Fig.~\ref{fig:gnuplot-example-2} foi criada no \gnuplot{} a partir
de um arquivo de dados contendo um ponto $(x,y)$ por linha com os
seguintes comandos:

\index{gnuplot@\gnuplot!comandos}%
\begin{codeverbatim}
set terminal pslatex monochrome norotate
set output 'gnuplot-2.tex'
set title 'Crescimento de hosts na Internet de 1989--1997'
set size 1, 0.75
set ylabel "hosts \\ ($10^6)$"
set xlabel 'Ano'
plot 'hosts.dat' thru x/1000000 title 'hosts' with linespoints
\end{codeverbatim}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% Essa seção sobre psfrag foi uma contribuição de Luiz Gonzaga da
%%% Silveira Junior, <gonzaga@acm.org>.
%%%
%%% Os exemplos a seguir exigem psfrag versão 3.3 ou superior.

\subsection{Inclusão de Textos \LaTeX{} em Figuras EPS}
\index{figuras!package psfrag@\eng{package} \pack{psfrag}}%
\index{figuras!inclusao de texto em@inclusão de texto em}%

O \eng{package} \package{psfrag} permite a substituição de rótulos
(\eng{strings}) em arquivos EPS por construções arbitrárias (textos e
equações) do \LaTeX. Assim, figuras EPS produzidas por qualquer
aplicativo poderão incorporar fórmulas matemáticas, macros e textos do
\LaTeX.  Resumidamente, para usar o \psf{} é necessário:

\begin{enumerate}
\item Criar uma figura EPS, contendo um ou mais rótulos nas posições
  que você deseja que o texto \LaTeX{} apareça. Use preferencialmente
  uma única palavra, sem acentos para evitar problemas no processo de
  substituição de texto.

\item Antes do comando \command{includegraphics} usar o comando
  \command{psfrag} para cada rótulo no arquivo EPS, como segue:

  \begin{codeverbatim}
    \psfrag{rótulo}[posn][PSposn][escala][rotação]{substituição}
  \end{codeverbatim}
\end{enumerate}

\begin{description}
\item[\textit{rótulo}] Será substituído pelo texto \LaTeX{}
  correspondente.  Todas as ocorrências do rótulo na figura são
  trocadas.

\item[\textit{posn}] Posição de referência para o novo texto \LaTeX{}.
  Os argumentos possíveis são duas letras, sendo uma da lista
  \verb!{t,b,B,c}! (\eng{top, bottom, baseline, center}) e a outra da
  lista \verb!{l,r,c}! (\eng{left, right, center}).  Se uma letra é
  omitida, \verb!c! (\eng{center}) é assumida.  Se o argumento é
  omitido \verb![Bl]! (\eng{left baseline}) é assumido e \verb![]!
  especifica posicionamento centralizado.

\item[\textit{PSposn}] Posição de referência do rótulo no arquivo EPS.

\item[\textit{escala}] Fator de escala para o texto.  Para melhores
  resultados use comandos de tamanho de letras como \command{small} e
  \command{large}, ao invés de fator de escala.  O valor \eng{default}
  é 1.

\item[\textit{rotação}] Opção usada quando utiliza-se aplicação que permite
  somente textos horizontais em arquivos EPS\@. Quando a opção for zero,
  o texto será inserido no mesmo ângulo do texto EPS e quando
  especificado será somado ao ângulo existente. O ângulo é graus, com
  sentido anti-horário.  O ângulo \eng{default} é zero.

\item[\textit{substituição}] Texto \LaTeX{} inserido no gráfico EPS\@.
  Textos regulares, equações e símbolos especiais podem ser usados.
\end{description}

\begin{figure}[htb]
  \begin{minipage}[t]{.46\linewidth}
    \centering
    \includegraphics{figures/pendulo.eps}
    \caption{Figura original}
    \label{fig:pendnofrag}
  \end{minipage}\hfill
  \begin{minipage}[t]{.46\linewidth}
    \psfrag{base}[][]{\textit{Base de sustentação}}
    \psfrag{q1}{$\theta$}
    \psfrag{q2}{$\alpha$}
    \psfrag{L1}[l][l][1]{\textit{braço 1}}
    \psfrag{L2}[r][r][1]{\textit{braço 2}}
    \psfrag{pa}{$P_{a}$}
    \centering
    \includegraphics{figures/pendulo.eps}
    \caption{Figura com substituição de texto usando \psf}
    \label{fig:pendfrag}
  \end{minipage}
\end{figure}

A Fig.~\ref{fig:pendfrag} mostra o resultado da substituição dos
rótulos da Fig.~\ref{fig:pendnofrag} pelo \psf.  Se você está usando
algum \eng{previewer} de DVI para ver esse documento as substituições
devem aparecer listadas à esquerda da figura.  Os textos apenas
aparecem sobrepostos nas suas posições corretas na versão
\eng{PostScript} do documento.

\subsubsection{Escalonamento de Figuras e Textos}

Se os comandos \command{scalebox} ou \command{resizebox} forem usados
para redimensionar a figura EPS o texto substituído pelo \psf{} também
será alterado.  Isso ocorre porque o escalonamento acontece depois que
o texto foi substituído, como mostra a Fig.~\ref{fig:pendscale}.

\begin{figure}[htp]
  \psfrag{base}[][]{\textit{Base de sustentação}}
  \psfrag{q1}{$\theta$}
  \psfrag{q2}{$\alpha$}
  \psfrag{L1}[l][l][1]{\textit{braço 1}}
  %%% a linha abaixo usa escala de 0.7 e rotação de -30 graus.
  %\psfrag{L1}[][][0.7][-30]{Braço 1}
  \psfrag{L2}[r][r][1]{\textit{braço 2}}
  %%% a linha abaixo usa escala de 0.8 e rotação de 40 graus.
  %\psfrag{L2}[][][0.8][40]{Braço 2}
  \psfrag{pa}{$P_{a}$}
  \centering
  \scalebox{1.3}{\includegraphics{figures/pendulo.eps}}
  \caption{Escalonamento da figura e do texto do \psf}
  \label{fig:pendscale}
\end{figure}

A Fig.~\ref{fig:pendnoscale}, entretanto, usa o comando
\command{includegraphics} com argumento \verb![scale=]!  para
redimensionar a figura.  Nesse caso não há alteração no texto pois o
escalonamento ocorre antes da sua substituição na figura pelo \psf.

\begin{figure}[htp]
  \psfrag{base}[][]{\textit{Base de sustentação}}
  \psfrag{q1}{$\theta$}
  \psfrag{q2}{$\alpha$}
  \psfrag{L1}[l][l][1]{\textit{braço 1}}
  \psfrag{L2}[r][r][1]{\textit{braço 2}}
  \psfrag{pa}{$P_{a}$}
  \centering
  \includegraphics[scale=1.3]{figures/pendulo.eps}
  \caption{Escalonamento apenas da figura}
  \label{fig:pendnoscale}
\end{figure}

\index{figuras|)}%

%%% Used by GNU Emacs and AUC TeX.
%%% Local Variables:
%%% TeX-master: "demo.tex"
%%% TeX-auto-save: t
%%% End:

%%% demo-graphics.tex ends here.
